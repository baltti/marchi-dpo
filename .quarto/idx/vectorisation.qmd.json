{"title":"Оцифровка материалов","markdown":{"yaml":{"title":"Оцифровка материалов","format":"html"},"headingText":"Геопривязка растра","headingAttr":{"id":"georeferencing","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n\nВ качестве исходной информации при векторизации, как правило, выступают растровые изображения. Это могут быть отсканированные оригиналы бумажных карт, выдержки из официальной документации, информация с градостроительных порталов, из градостроительной документации, спутниковые снимки или снимки, полученные с беспилотных летательных аппаратов, даже просто скриншоты экрана, а также тайловые подложки (типа той, что мы подгружаем из OpenStreetMap).\n\n**Геопривязка растра** - это присвоение растровому изображению нужной географической системы координат.\n\nВ процессе привязки на растровом изображении для каждого пикселя, у которого есть условные координаты на растре, находится соотвествующая координата в целевой системе координат.\n\nВ качестве исходных данных возьмем информацию с Градостроительного портала Санкт-Петербурга <https://portal.kgainfo.spb.ru/KGAMap/Map>\n\n![](images/37.PNG)\n\nЭтот портал позволяет получать информацию из градостроительной документации Санкт-Петербурга, но только в растровом виде, выгрузки границ объектов в векторных форматах здесь не предусмотрено. Поэтому, если вы хотите воспользоваться данными портала, вам нужно будет из самостоятельно векторизовать.\n\nРассмотрим пример сохранения растровой картинки с границами функциональной зоны.\n\nДля этого найдем на карте интересующую нас зону, щелкнем на нее, чтобы получить информацию об объектах в точке.\n\n![](images/38.png)\n\nДалее выберем фунцию печати информации об функциональной зоне, после чего в новой вкладке откроется отчет с подробной информацией и схемой расположения объекта.\n\nПросто сохраним картинку из отчета, чтобы в дальнейшем открыть ее в QGIS, выполнить геопривязку и осуществить векторизацию.\n\nСоздадим новый проект (рекомендую либо сразу его создавать в системе координат `EPSG:3857`, либо сразу после создания перепроецировать на лету в эту систему координат).\n\nДля геопривязки растровых изображений в QGIS существует встроенный инструмент [**Georeferencer**](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/georeferencer.html) (может называться Геопривязка).\n\n![](images/39.png)\n\nДалее откроется окно геопривязки растра.\n\n![](images/40.PNG)\n\nВ первую очередь нужно задать или проверить параметры трансформации растра (в строке меню *Параметры --- Параметры трансформации*).\n\n![](images/41.PNG)\n\nОсновные параметры здесь:\n\n-   тип трансформации - алгоритм преобразования растрового изображения, подробнее [здесь](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/georeferencer.html#available-transformation-algorithms);\n\n-   метод интерполяции;\n\n-   целевая система координат - система координат, которую вы хотите присвоить растру;\n\n-   целевой растр - нужно указать путь и название файла, полученного в результате привязки.\n\nДля выполнения привязки нужно открыть растр ![](images/42.PNG), указать контрольные точки и их координаты в целевой системе координат.\n\n![](images/43.PNG)\n\nКонтрольные точки - это точки, по которым будет осуществляться привязка растрового изображения. У этих точек известны координаты на растровом изображении (как правило, в пикселях) и в целевой системе координат, то есть фактически по этим точкам растр \"усаживается\" в нужное место на карту.\n\nЧтобы поставить контрольную точку, нужно щелкнуть на нее в окне привзяки на растре, а далее указать ее координаты в диалоговом окне.\n\n![](images/44.PNG)\n\nКоординаты можно ввести с клавиатуры (если они у вас есть), либо выбрать вариант **С карты** и просто щеклнуть на ту же самую точку на карте, после чего эти координаты пропишутся в диалоговом окне автоматически.\n\nВ качестве контрольных точек лучше всего использовать какие-то жесткие контура, на которых вы однозначно можете указать конкретную точку: угол дома, перекресток, угол парка и что-нибудь подобное.\n\nДля различных вариантов трансформации рекомендуется разное минимальное число контрольных точек, но, как правило, общая рекомендация использовать не менее 3 точек. Желательно, чтобы эти точки не были расположены на одной линии.\n\nПосле того, как вы укажете все контрольные точки и их координаты на карте, они будут отображены в таблице под растровым изображением в окне привязки.\n\n![](images/45.PNG)\n\nКонтрольные точки привязки можно сохранить и потом использовать в дальнейшем в других проектах (но только для того же самого растра).\n\nДля завершения процесса привязки нужно нажать **Начать привязку растра** ![](images/46.PNG) после чего растр будет модифицирован и отобразиться в нужном месте на карте.\n\n![](images/47.PNG)\n\nЭтот модифицированный растр уже будет иметь в себе сведения о системе координат и его местоположении, поэтому его потом можно будет использовать в дальнейших проектах уже без процесса привязки.\n\n# Ручная векторизация\n\n**Векторизация** - процесс получения векторных географических данных. Как правило, имеется ввиду процесс получения на основе исходных растровых данных (сканированные карты, информация по официальным запросам, градостроительная документация и прочее).\n\n## Создание нового слоя и добавление в него объектов\n\nВо всех предыдущих заданиях мы использовали уже готовые слои, которые просто добавляли в проект, но мы можем создавать и отрисовывать слои самостоятельно.\n\nДля того, чтобы создать новый векторный слой в строке меню нужно выбрать **Файл - Создать слой - Создать новый Geopackage слой**.\n\n![](images/48.png)\n\nПосле этого появится окно, в котором нужно задать имя файла, тип геометрии, систему координат, а также структуру таблицы атрибутов.\n\n![](images/49.PNG)\n\nВ качестве примера рассмотрим отрисовку домов, в атрибутивной таблице будут два поля: адрес и количество проживающих.\n\n![](images/50.PNG)\n\n::: callout-note\nНа этом этапе вы можете не создавать конкретную структуру таблицы атрибутов, так как вы всегда можете ее отредактировать позднее. По умолчанию будет создано 1 поле **fid**, которое будет заполнено автоматически номерами объектов.\n:::\n\n::: callout-warning\nРекомендую все файлы и названия полей делать латиницей, потому что QGIS может не всегда корректно работать с данными, путь к которым прописан русскими буквами, а также с русскими названиями полей.\n\nТакже следует помнить, что названия файлов и слоев, а также названия полей в атрибутивной таблице лучше делать осмысленными, чтобы вы потом могли понять, что содержится в ваших данных.\n\nЕсли вы не уверены в том, какие атрибуты вам нужны, то помните, что вы всегда можете отредактировать таблицу атрибутов уже после создания слоя и отрисовки объектов.\n:::\n\nПосле того, как вы создадите слой, то он появится у вас в списке слоев, но, конечно, никаких объектов на карту не добавится, потому что они пока не отрисованы.\n\nДля начала отрисовки объектов в слое необходимо включить режим редактирования.\n\n![](images/51.png)\n\nПосле включения режима редактирования на панели инструментов станут активными кнопки создания объектов и редактирования вершин ![](images/52.PNG) (так как у нас слой с площадными объектами, то предлагается только создания полигонов и их редактирование, если бы был другой тип геометрии инструменты были бы немного другими).\n\nДля начала отрисовки объекта нужно щелкнуть на первую точку полигона, а потом по всем поворотным, завершается отрисовка контура щелчком правой кнопкой мыши.\n\n![](images/2021-12-01-12-46-06.gif)\n\nПо умолчанию в программе стоит настройка открывать окно ввода атрибутов для каждого созданного объекта.\n\n![](images/53.PNG)\n\nВ этом окне можно ввести характеристики объектов сразу, либо оставить пустым, просто нажав кнопку ОК (если вы здесь нажмете кнопку Отмена, то объект не будет создан).\n\nАвтоматическое появление формы ввода можно отключить в настройках программы.\n\n![](images/54.PNG)\n\n## Прилипание объектов\n\nПри отрисовке некоторых объектов важно, чтобы между ними были общие точки, общие границы, не было наложений или наоборот дырок между объектами. Для того, чтобы соблюдать эти правила, нужно пользоваться инструментами прилипания.\n\n![](images/55.png)\n\nНа панели инструментов прилипания доступны следующие функции (слева направо)\n\n![](images/56.PNG)\n\n-   разрешить прилипание;\n\n-   выбор слоев, для которых будет доступно прилипание: все слои - прилипание будет осуществляться с учетом объектов всех слоев, которые есть в проекте (даже невидимых в данный момент), активный слой - прилипание будет осуществляться только для объектов текущего слоя.\n\n![](images/58.png)\n\n-   тип объектов, к которым осуществляется прилипание (может быть выбрано сразу несколько вариантов):\n\n    -   к вершинам - прилипание только к узловым точкам;\n\n    -   к линиям - прилипание к любой точке линии;\n\n    -   к поверхности - прилипание к любой точке внутри полигона;\n\n    -   к центроиду - прилипание к геометрическому центру полигона;\n\n    -   середина отрезка - прилипание только к середине линии;\n\n    -   конечные точки линии - прилипание только к начальной или конечной точке линии.\n\n![](images/59.png)\n\n-   порог прилипания - то есть, в какой области вокруг курсора будет искаться объект для прилипания;\n\n-   топологическое редактирование позволяет сохранять общие границы между объектами. Если эта опция включена, то программа будет автоматически перестраивать общую границу для двух объектов (если таковая граница есть);\n\n-   допустимы ли наложения между объектами ![](images/183.png)\n\n-   разрешать прилипание к пересечениям - прилипание будет осуществляться к пересечениям двух объектов, даже если там нет вершины;\n\n-   трассирование (tracing) - позволяет ускорить привязку к линейным объектам, при включении этой опции вам не нужно будет прощелкивать по всей линии, достаточно будет нескольких точек (если установаить значение отступа offset, то можно построить линию, параллельную существующей);\n\n-   самоприлипание - позволяет осуществлять привязку отрисовываемого объекта к самому себе.\n\n![](images/2021-12-01-13-20-37.gif)\n\n## Редактирование объектов\n\n### Редактирование формы объектов\n\nДля редактирования формы объектов следует пользоваться инструментом работы с вершинами ![](images/60.PNG)\n\n![](images/2021-12-01-13-25-36.gif)\n\nТакже для редактирования объектов есть целый ряд функций, представленных в пункте **Правка** $\\longrightarrow$ **Редактировать геометрию** строки меню.\n\n![](images/61.png)\n\n### Перемещение объекта\n\n![](images/62.gif)\n\n### Поворот объекта\n\n![](images/63.gif)\n\n### Разбивка объекта\n\n![](images/64.gif)\n\n### Преобразование объекта в кольцо\n\n![](images/65.gif)\n\n::: callout-note\nБолее подробно с функциями редактирования векторных объектов можно ознакомиться в документации по [ссылке](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#advanced-digitizing)\n:::\n\n::: callout-tip\nБолее подробно с функциями редактирования векторных объектов можно ознакомиться в документации по [ссылке](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#advanced-digitizing)\n:::\n\n::: callout-tip\nДля удобства дополнительный инструменты оцифровки можно включить из строки меню *Вид* $\\longrightarrow$ *Панели инструментов* $\\longrightarrow$ *Дополнительные инструменты оцифровки* (и *Панель инструментов оцифровки*).\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.47.48.png){fig-align=\"center\"}\n\n*Дополнительные инструменты оцифровки* включают в себя инструменты, входящие в группу инструментов изменения геометрии.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.55.39.png){fig-align=\"center\"}\n\n*Панель инструментов оцифровки* включает в себя инструменты создания геометрических объектов определенной формы: эллипсы, прямоугольники и многоугольники.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.55.50.png){fig-align=\"center\"}\n\nТакже есть еще одна панель дополнительных инструментов оцифровки, открываемая из пункта меню *Вид* $\\longrightarrow$ *Панели* $\\longrightarrow$ *Дополнительные инструменты оцифровки.*\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.59.17.png){fig-align=\"center\"}\n\nОткрытая таким образом панель позволяет создавать геометрические объекты по их параметрам: задавая длины линий, углы между линиями и прочее. Подробнее про нее прочитать можно в [документации](https://docs.qgis.org/3.40/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#the-advanced-digitizing-panel).\n\n![](images/Снимок%20экрана%202025-03-03%20в%2015.00.39.png){fig-align=\"center\"}\n:::\n\n::: callout-tip\nВ последнем обновлении версии QGIS 3.42 появились новые функции, упрощающие отрисовку объектов[^1]:\n\n-   обрезать\\\\вытянуть объект\n\n![](images/7.png){fig-align=\"center\"}\n\n![](images/afff864bb555fcfba93b700cf4f63c7e2eb65390.gif){fig-align=\"center\"}\n\n-   добавлена опция привязки объектов в геопривязке.\n\n![](images/5d2403406b6bf2644f6ba0d60a77364dc80b4c7b.png){fig-align=\"center\"}\n:::\n\n[^1]: **Changelog for version: 3.42** <https://changelog.qgis.org/en/qgis/version/3.42/>\n\n# Автоматическая векторизация\n\n## Встроенные стредства QGIS\n\nПо умолчанию в QGIS есть инструмент преобразования растра в вектор, то есть автоматической векторизации.\n\nЭтот инструмент может быть запущен из строки меню *Растр* $\\longrightarrow$ *Преобразование* $\\longrightarrow$ *Создание полигонов (растр в вектор)*.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2015.04.05.png){fig-align=\"center\"}\n\nС документацией можно ознакомиться по [ссылке](https://docs.qgis.org/3.40/en/docs/training_manual/complete_analysis/raster_to_vector.html).\n\nПример работы автоматического векторизатора показан ниже.\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/mQmw3N1dLFo?si=G95HGqiv-xtGZNmg\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-important\nТак как автоматическая векторизация здесь осуществляется фактически только по цвету пикселей вашего растра, то идеальным случаем для векторизации будут большие полигоны с равномерной заливкой и без контура, в других случаях вы можете получить слишком много маленьких полигонов, которые будут требовать дополнительной проработки и объединения.\n\nТакже следует отметить, что полученные полигоны не будут иметь гладкие и ровные стороны, а будут своеобразными \"лесенками\", в силу того, что пиксели напрямую преобразовываются в объекты.\n:::\n\n## Модуль Bunting labs AI\n\nСтраница модуля: <https://plugins.qgis.org/plugins/buntinglabs-qgis-plugin/>\n\nСайт модуля: <https://buntinglabs.com/solutions/ai-vectorizer-qgis-plugin>\n\nРепозиторий с кодом: <https://github.com/BuntingLabs/buntinglabs-qgis-plugin>\n\nВ январе 2024 года компания Bunting Labs выпустила плагин для QGIS Bunting Labs AI Vectorizer, который помогает оцифровывать растры, продолжая линии, начатые пользователем. Разработчики называют это \"автозаполнением\", потому что плагин не делает всю работу сразу, а дорисовывает части линий на основе контекста, оставляя пользователю возможность в любой момент перехватить контроль.[^2]\n\n[^2]: **Плагин для AI-оцифровки растров в QGIS -** <https://cartetika.ru/tpost/4dta8sa621-plagin-dlya-ai-otsifrovki-rastrov-v-qgis>\n\nПлагин **AI Vectorizer** работает так: когда пользователь начинает отрисовывать векторный объект, модель \"смотрит\" на его действия и продолжает эту линию, независимо от ее значения.\n\nПользователь начинает оцифровывать линию или полигон по растру, и как только есть первые две вершины, маленький кусочек карты отправляется на сервер. Модель \"смотрит\" на нарисованный на карте отрезок и выбирает пиксели, по которым должны проходить следующие вершины, после чего плагин дорисовывает 50 следующих точек линии. Этот процесс подходит для любых линий, даже для пунктирных и тех, которые пересекают другие похожие объекты. А если плагин собьется с пути, можно просто отменить последний шаг и не терять при этом много времени.\n\nПеред работой необходимо зарегистрировать аккаунт по [ссылке](https://buntinglabs.com/account/register). После этого вам на указанную в форме электронную почту придет письмо для активации аккаунта.\n\nДалее следует установить модуль **Bunting Labs AI Vectorizer.**\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/PKEuQS4sMJE?si=5KlOz7JT4-WM5aPq\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-warning\nСудя по всему модуль теперь работает бесплатно только в течение 30 дней с момента активации работы с ним.\n:::\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"images/miscgif.mp4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"images/miscgif3.mp4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-tip\nТакже в модуль входит сервис привязки с использованием искусственного интеллекта https://buntinglabs.com/solutions/ai-georeferencer.\n\n![](images/qgis-button.png){fig-align=\"center\"}\n:::\n","srcMarkdownNoYaml":"\n\n# Геопривязка растра {#georeferencing}\n\nВ качестве исходной информации при векторизации, как правило, выступают растровые изображения. Это могут быть отсканированные оригиналы бумажных карт, выдержки из официальной документации, информация с градостроительных порталов, из градостроительной документации, спутниковые снимки или снимки, полученные с беспилотных летательных аппаратов, даже просто скриншоты экрана, а также тайловые подложки (типа той, что мы подгружаем из OpenStreetMap).\n\n**Геопривязка растра** - это присвоение растровому изображению нужной географической системы координат.\n\nВ процессе привязки на растровом изображении для каждого пикселя, у которого есть условные координаты на растре, находится соотвествующая координата в целевой системе координат.\n\nВ качестве исходных данных возьмем информацию с Градостроительного портала Санкт-Петербурга <https://portal.kgainfo.spb.ru/KGAMap/Map>\n\n![](images/37.PNG)\n\nЭтот портал позволяет получать информацию из градостроительной документации Санкт-Петербурга, но только в растровом виде, выгрузки границ объектов в векторных форматах здесь не предусмотрено. Поэтому, если вы хотите воспользоваться данными портала, вам нужно будет из самостоятельно векторизовать.\n\nРассмотрим пример сохранения растровой картинки с границами функциональной зоны.\n\nДля этого найдем на карте интересующую нас зону, щелкнем на нее, чтобы получить информацию об объектах в точке.\n\n![](images/38.png)\n\nДалее выберем фунцию печати информации об функциональной зоне, после чего в новой вкладке откроется отчет с подробной информацией и схемой расположения объекта.\n\nПросто сохраним картинку из отчета, чтобы в дальнейшем открыть ее в QGIS, выполнить геопривязку и осуществить векторизацию.\n\nСоздадим новый проект (рекомендую либо сразу его создавать в системе координат `EPSG:3857`, либо сразу после создания перепроецировать на лету в эту систему координат).\n\nДля геопривязки растровых изображений в QGIS существует встроенный инструмент [**Georeferencer**](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/georeferencer.html) (может называться Геопривязка).\n\n![](images/39.png)\n\nДалее откроется окно геопривязки растра.\n\n![](images/40.PNG)\n\nВ первую очередь нужно задать или проверить параметры трансформации растра (в строке меню *Параметры --- Параметры трансформации*).\n\n![](images/41.PNG)\n\nОсновные параметры здесь:\n\n-   тип трансформации - алгоритм преобразования растрового изображения, подробнее [здесь](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/georeferencer.html#available-transformation-algorithms);\n\n-   метод интерполяции;\n\n-   целевая система координат - система координат, которую вы хотите присвоить растру;\n\n-   целевой растр - нужно указать путь и название файла, полученного в результате привязки.\n\nДля выполнения привязки нужно открыть растр ![](images/42.PNG), указать контрольные точки и их координаты в целевой системе координат.\n\n![](images/43.PNG)\n\nКонтрольные точки - это точки, по которым будет осуществляться привязка растрового изображения. У этих точек известны координаты на растровом изображении (как правило, в пикселях) и в целевой системе координат, то есть фактически по этим точкам растр \"усаживается\" в нужное место на карту.\n\nЧтобы поставить контрольную точку, нужно щелкнуть на нее в окне привзяки на растре, а далее указать ее координаты в диалоговом окне.\n\n![](images/44.PNG)\n\nКоординаты можно ввести с клавиатуры (если они у вас есть), либо выбрать вариант **С карты** и просто щеклнуть на ту же самую точку на карте, после чего эти координаты пропишутся в диалоговом окне автоматически.\n\nВ качестве контрольных точек лучше всего использовать какие-то жесткие контура, на которых вы однозначно можете указать конкретную точку: угол дома, перекресток, угол парка и что-нибудь подобное.\n\nДля различных вариантов трансформации рекомендуется разное минимальное число контрольных точек, но, как правило, общая рекомендация использовать не менее 3 точек. Желательно, чтобы эти точки не были расположены на одной линии.\n\nПосле того, как вы укажете все контрольные точки и их координаты на карте, они будут отображены в таблице под растровым изображением в окне привязки.\n\n![](images/45.PNG)\n\nКонтрольные точки привязки можно сохранить и потом использовать в дальнейшем в других проектах (но только для того же самого растра).\n\nДля завершения процесса привязки нужно нажать **Начать привязку растра** ![](images/46.PNG) после чего растр будет модифицирован и отобразиться в нужном месте на карте.\n\n![](images/47.PNG)\n\nЭтот модифицированный растр уже будет иметь в себе сведения о системе координат и его местоположении, поэтому его потом можно будет использовать в дальнейших проектах уже без процесса привязки.\n\n# Ручная векторизация\n\n**Векторизация** - процесс получения векторных географических данных. Как правило, имеется ввиду процесс получения на основе исходных растровых данных (сканированные карты, информация по официальным запросам, градостроительная документация и прочее).\n\n## Создание нового слоя и добавление в него объектов\n\nВо всех предыдущих заданиях мы использовали уже готовые слои, которые просто добавляли в проект, но мы можем создавать и отрисовывать слои самостоятельно.\n\nДля того, чтобы создать новый векторный слой в строке меню нужно выбрать **Файл - Создать слой - Создать новый Geopackage слой**.\n\n![](images/48.png)\n\nПосле этого появится окно, в котором нужно задать имя файла, тип геометрии, систему координат, а также структуру таблицы атрибутов.\n\n![](images/49.PNG)\n\nВ качестве примера рассмотрим отрисовку домов, в атрибутивной таблице будут два поля: адрес и количество проживающих.\n\n![](images/50.PNG)\n\n::: callout-note\nНа этом этапе вы можете не создавать конкретную структуру таблицы атрибутов, так как вы всегда можете ее отредактировать позднее. По умолчанию будет создано 1 поле **fid**, которое будет заполнено автоматически номерами объектов.\n:::\n\n::: callout-warning\nРекомендую все файлы и названия полей делать латиницей, потому что QGIS может не всегда корректно работать с данными, путь к которым прописан русскими буквами, а также с русскими названиями полей.\n\nТакже следует помнить, что названия файлов и слоев, а также названия полей в атрибутивной таблице лучше делать осмысленными, чтобы вы потом могли понять, что содержится в ваших данных.\n\nЕсли вы не уверены в том, какие атрибуты вам нужны, то помните, что вы всегда можете отредактировать таблицу атрибутов уже после создания слоя и отрисовки объектов.\n:::\n\nПосле того, как вы создадите слой, то он появится у вас в списке слоев, но, конечно, никаких объектов на карту не добавится, потому что они пока не отрисованы.\n\nДля начала отрисовки объектов в слое необходимо включить режим редактирования.\n\n![](images/51.png)\n\nПосле включения режима редактирования на панели инструментов станут активными кнопки создания объектов и редактирования вершин ![](images/52.PNG) (так как у нас слой с площадными объектами, то предлагается только создания полигонов и их редактирование, если бы был другой тип геометрии инструменты были бы немного другими).\n\nДля начала отрисовки объекта нужно щелкнуть на первую точку полигона, а потом по всем поворотным, завершается отрисовка контура щелчком правой кнопкой мыши.\n\n![](images/2021-12-01-12-46-06.gif)\n\nПо умолчанию в программе стоит настройка открывать окно ввода атрибутов для каждого созданного объекта.\n\n![](images/53.PNG)\n\nВ этом окне можно ввести характеристики объектов сразу, либо оставить пустым, просто нажав кнопку ОК (если вы здесь нажмете кнопку Отмена, то объект не будет создан).\n\nАвтоматическое появление формы ввода можно отключить в настройках программы.\n\n![](images/54.PNG)\n\n## Прилипание объектов\n\nПри отрисовке некоторых объектов важно, чтобы между ними были общие точки, общие границы, не было наложений или наоборот дырок между объектами. Для того, чтобы соблюдать эти правила, нужно пользоваться инструментами прилипания.\n\n![](images/55.png)\n\nНа панели инструментов прилипания доступны следующие функции (слева направо)\n\n![](images/56.PNG)\n\n-   разрешить прилипание;\n\n-   выбор слоев, для которых будет доступно прилипание: все слои - прилипание будет осуществляться с учетом объектов всех слоев, которые есть в проекте (даже невидимых в данный момент), активный слой - прилипание будет осуществляться только для объектов текущего слоя.\n\n![](images/58.png)\n\n-   тип объектов, к которым осуществляется прилипание (может быть выбрано сразу несколько вариантов):\n\n    -   к вершинам - прилипание только к узловым точкам;\n\n    -   к линиям - прилипание к любой точке линии;\n\n    -   к поверхности - прилипание к любой точке внутри полигона;\n\n    -   к центроиду - прилипание к геометрическому центру полигона;\n\n    -   середина отрезка - прилипание только к середине линии;\n\n    -   конечные точки линии - прилипание только к начальной или конечной точке линии.\n\n![](images/59.png)\n\n-   порог прилипания - то есть, в какой области вокруг курсора будет искаться объект для прилипания;\n\n-   топологическое редактирование позволяет сохранять общие границы между объектами. Если эта опция включена, то программа будет автоматически перестраивать общую границу для двух объектов (если таковая граница есть);\n\n-   допустимы ли наложения между объектами ![](images/183.png)\n\n-   разрешать прилипание к пересечениям - прилипание будет осуществляться к пересечениям двух объектов, даже если там нет вершины;\n\n-   трассирование (tracing) - позволяет ускорить привязку к линейным объектам, при включении этой опции вам не нужно будет прощелкивать по всей линии, достаточно будет нескольких точек (если установаить значение отступа offset, то можно построить линию, параллельную существующей);\n\n-   самоприлипание - позволяет осуществлять привязку отрисовываемого объекта к самому себе.\n\n![](images/2021-12-01-13-20-37.gif)\n\n## Редактирование объектов\n\n### Редактирование формы объектов\n\nДля редактирования формы объектов следует пользоваться инструментом работы с вершинами ![](images/60.PNG)\n\n![](images/2021-12-01-13-25-36.gif)\n\nТакже для редактирования объектов есть целый ряд функций, представленных в пункте **Правка** $\\longrightarrow$ **Редактировать геометрию** строки меню.\n\n![](images/61.png)\n\n### Перемещение объекта\n\n![](images/62.gif)\n\n### Поворот объекта\n\n![](images/63.gif)\n\n### Разбивка объекта\n\n![](images/64.gif)\n\n### Преобразование объекта в кольцо\n\n![](images/65.gif)\n\n::: callout-note\nБолее подробно с функциями редактирования векторных объектов можно ознакомиться в документации по [ссылке](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#advanced-digitizing)\n:::\n\n::: callout-tip\nБолее подробно с функциями редактирования векторных объектов можно ознакомиться в документации по [ссылке](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#advanced-digitizing)\n:::\n\n::: callout-tip\nДля удобства дополнительный инструменты оцифровки можно включить из строки меню *Вид* $\\longrightarrow$ *Панели инструментов* $\\longrightarrow$ *Дополнительные инструменты оцифровки* (и *Панель инструментов оцифровки*).\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.47.48.png){fig-align=\"center\"}\n\n*Дополнительные инструменты оцифровки* включают в себя инструменты, входящие в группу инструментов изменения геометрии.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.55.39.png){fig-align=\"center\"}\n\n*Панель инструментов оцифровки* включает в себя инструменты создания геометрических объектов определенной формы: эллипсы, прямоугольники и многоугольники.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.55.50.png){fig-align=\"center\"}\n\nТакже есть еще одна панель дополнительных инструментов оцифровки, открываемая из пункта меню *Вид* $\\longrightarrow$ *Панели* $\\longrightarrow$ *Дополнительные инструменты оцифровки.*\n\n![](images/Снимок%20экрана%202025-03-03%20в%2014.59.17.png){fig-align=\"center\"}\n\nОткрытая таким образом панель позволяет создавать геометрические объекты по их параметрам: задавая длины линий, углы между линиями и прочее. Подробнее про нее прочитать можно в [документации](https://docs.qgis.org/3.40/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#the-advanced-digitizing-panel).\n\n![](images/Снимок%20экрана%202025-03-03%20в%2015.00.39.png){fig-align=\"center\"}\n:::\n\n::: callout-tip\nВ последнем обновлении версии QGIS 3.42 появились новые функции, упрощающие отрисовку объектов[^1]:\n\n-   обрезать\\\\вытянуть объект\n\n![](images/7.png){fig-align=\"center\"}\n\n![](images/afff864bb555fcfba93b700cf4f63c7e2eb65390.gif){fig-align=\"center\"}\n\n-   добавлена опция привязки объектов в геопривязке.\n\n![](images/5d2403406b6bf2644f6ba0d60a77364dc80b4c7b.png){fig-align=\"center\"}\n:::\n\n[^1]: **Changelog for version: 3.42** <https://changelog.qgis.org/en/qgis/version/3.42/>\n\n# Автоматическая векторизация\n\n## Встроенные стредства QGIS\n\nПо умолчанию в QGIS есть инструмент преобразования растра в вектор, то есть автоматической векторизации.\n\nЭтот инструмент может быть запущен из строки меню *Растр* $\\longrightarrow$ *Преобразование* $\\longrightarrow$ *Создание полигонов (растр в вектор)*.\n\n![](images/Снимок%20экрана%202025-03-03%20в%2015.04.05.png){fig-align=\"center\"}\n\nС документацией можно ознакомиться по [ссылке](https://docs.qgis.org/3.40/en/docs/training_manual/complete_analysis/raster_to_vector.html).\n\nПример работы автоматического векторизатора показан ниже.\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/mQmw3N1dLFo?si=G95HGqiv-xtGZNmg\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-important\nТак как автоматическая векторизация здесь осуществляется фактически только по цвету пикселей вашего растра, то идеальным случаем для векторизации будут большие полигоны с равномерной заливкой и без контура, в других случаях вы можете получить слишком много маленьких полигонов, которые будут требовать дополнительной проработки и объединения.\n\nТакже следует отметить, что полученные полигоны не будут иметь гладкие и ровные стороны, а будут своеобразными \"лесенками\", в силу того, что пиксели напрямую преобразовываются в объекты.\n:::\n\n## Модуль Bunting labs AI\n\nСтраница модуля: <https://plugins.qgis.org/plugins/buntinglabs-qgis-plugin/>\n\nСайт модуля: <https://buntinglabs.com/solutions/ai-vectorizer-qgis-plugin>\n\nРепозиторий с кодом: <https://github.com/BuntingLabs/buntinglabs-qgis-plugin>\n\nВ январе 2024 года компания Bunting Labs выпустила плагин для QGIS Bunting Labs AI Vectorizer, который помогает оцифровывать растры, продолжая линии, начатые пользователем. Разработчики называют это \"автозаполнением\", потому что плагин не делает всю работу сразу, а дорисовывает части линий на основе контекста, оставляя пользователю возможность в любой момент перехватить контроль.[^2]\n\n[^2]: **Плагин для AI-оцифровки растров в QGIS -** <https://cartetika.ru/tpost/4dta8sa621-plagin-dlya-ai-otsifrovki-rastrov-v-qgis>\n\nПлагин **AI Vectorizer** работает так: когда пользователь начинает отрисовывать векторный объект, модель \"смотрит\" на его действия и продолжает эту линию, независимо от ее значения.\n\nПользователь начинает оцифровывать линию или полигон по растру, и как только есть первые две вершины, маленький кусочек карты отправляется на сервер. Модель \"смотрит\" на нарисованный на карте отрезок и выбирает пиксели, по которым должны проходить следующие вершины, после чего плагин дорисовывает 50 следующих точек линии. Этот процесс подходит для любых линий, даже для пунктирных и тех, которые пересекают другие похожие объекты. А если плагин собьется с пути, можно просто отменить последний шаг и не терять при этом много времени.\n\nПеред работой необходимо зарегистрировать аккаунт по [ссылке](https://buntinglabs.com/account/register). После этого вам на указанную в форме электронную почту придет письмо для активации аккаунта.\n\nДалее следует установить модуль **Bunting Labs AI Vectorizer.**\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/PKEuQS4sMJE?si=5KlOz7JT4-WM5aPq\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-warning\nСудя по всему модуль теперь работает бесплатно только в течение 30 дней с момента активации работы с ним.\n:::\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"images/miscgif.mp4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"images/miscgif3.mp4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n```\n\n::: callout-tip\nТакже в модуль входит сервис привязки с использованием искусственного интеллекта https://buntinglabs.com/solutions/ai-georeferencer.\n\n![](images/qgis-button.png){fig-align=\"center\"}\n:::\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":true,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"number-sections":true,"shift-heading-level-by":1,"output-file":"vectorisation.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","editor":"visual","theme":"cosmo","number-depth":4,"anchor-sections":true,"title":"Оцифровка материалов"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}